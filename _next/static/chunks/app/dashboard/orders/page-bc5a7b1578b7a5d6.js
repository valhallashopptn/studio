(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[611],{8376:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},9381:(e,t,a)=>{"use strict";a.d(t,{H:()=>l,p:()=>d});var r=a(88693),s=a(46786);let d={USD:1,TND:3.1},l=(0,r.vt)((0,s.Zr)((e,t)=>({currency:"USD",setCurrency:t=>e({currency:t}),formatPrice:e=>{let{currency:a}=t(),r=e*d[a];return"TND"===a?"".concat(r.toFixed(2)," TND"):"$".concat(r.toFixed(2))}}),{name:"topup-hub-currency",partialize:e=>({currency:e.currency})}))},15599:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},17607:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},19600:(e,t,a)=>{"use strict";a.d(t,{C:()=>l});var r=a(88693),s=a(46786),d=a(93473);let l=(0,r.vt)((0,s.Zr)((e,t)=>({stock:d.nB,addStockItems:(t,a)=>e(e=>{let r=a.filter(e=>""!==e.trim()).map(e=>({id:"stk_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,5)),productId:t,data:e.trim(),isUsed:!1,addedAt:new Date().toISOString()}));return{stock:[...e.stock,...r]}}),deleteStockItem:t=>{e(e=>({stock:e.stock.filter(e=>e.id!==t)}))},getStockForProduct:e=>t().stock.filter(t=>t.productId===e),getAvailableStockCount:e=>t().stock.filter(t=>t.productId===e&&!t.isUsed).length,deliverStockForOrder:(a,r)=>{let s=t().stock.filter(e=>e.productId===a&&!e.isUsed);if(s.length<r){console.warn("Not enough stock for product ".concat(a,". Required: ").concat(r,", Available: ").concat(s.length));let t=s.map(e=>e.data),d=new Set(s.map(e=>e.id));return e(e=>({stock:e.stock.map(e=>d.has(e.id)?{...e,isUsed:!0,usedAt:new Date().toISOString()}:e)})),t}let d=s.slice(0,r),l=d.map(e=>e.data),n=new Set(d.map(e=>e.id));return e(e=>({stock:e.stock.map(e=>n.has(e.id)?{...e,isUsed:!0,usedAt:new Date().toISOString()}:e)})),l}}),{name:"topup-hub-stock"}))},22346:(e,t,a)=>{"use strict";a.d(t,{w:()=>n});var r=a(95155),s=a(12115),d=a(87489),l=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,orientation:s="horizontal",decorative:n=!0,...i}=e;return(0,r.jsx)(d.b,{ref:t,decorative:n,orientation:s,className:(0,l.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",a),...i})});n.displayName=d.b.displayName},22656:(e,t,a)=>{Promise.resolve().then(a.bind(a,24313))},24313:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>I});var r=a(95155),s=a(12115),d=a(66766),l=a(58111),n=a(22100),i=a(30285),o=a(66695),c=a(85127),m=a(26126),u=a(67554),h=a(8376),p=a(24371),x=a(93576),f=a(15599),v=a(37830),j=a(38988),b=a(17607),g=a(54165),y=a(22346),N=a(83013),w=a(9381),k=a(84526),A=a(66424),C=a(87481),O=a(4154),R=a(2480);let S={pending:{variant:"secondary",icon:u.A,label:"Pending"},completed:{variant:"default",icon:h.A,label:"Completed"},refunded:{variant:"destructive",icon:p.A,label:"Refunded"}},M=e=>{let{item:t}=e,{categories:a}=(0,k.C)(),d=(0,s.useMemo)(()=>new Map(a.map(e=>[e.name,e])),[a]).get(t.category);return d&&"manual"===d.deliveryMethod&&t.customFieldValues&&0!==Object.keys(t.customFieldValues).length?(0,r.jsx)("div",{className:"text-xs space-y-1 mt-2 text-muted-foreground",children:d.customFields.map(e=>{var a;let s=null==(a=t.customFieldValues)?void 0:a[e.name];return s?(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:[e.label,":"]}),(0,r.jsx)("span",{className:"font-semibold text-foreground truncate ml-2",children:s})]},e.id):null})}):null},D=e=>{var t;let{order:a,item:s}=e,{t:d}=(0,O.B)(),{toast:l}=(0,C.dj)(),n=null==(t=a.deliveredItems)?void 0:t[s.id];if("completed"!==a.status||!n||0===n.length)return null;let c=e=>{navigator.clipboard.writeText(e),l({title:"Copied!",description:"The information has been copied to your clipboard."})};return(0,r.jsxs)(o.Zp,{className:"mt-2 bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800",children:[(0,r.jsx)(o.aR,{className:"p-2",children:(0,r.jsxs)(o.ZB,{className:"text-xs text-green-800 dark:text-green-300 flex items-center gap-2",children:[(0,r.jsx)(x.A,{className:"h-4 w-4"})," Delivered Information"]})}),(0,r.jsx)(o.Wu,{className:"p-2 pt-0",children:(0,r.jsx)("div",{className:"space-y-1",children:n.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-background p-1.5 rounded-md",children:[(0,r.jsx)("code",{className:"text-xs font-mono whitespace-pre-wrap",children:e}),(0,r.jsx)(i.$,{size:"icon",variant:"ghost",className:"h-6 w-6 shrink-0",onClick:()=>c(e),children:(0,r.jsx)(f.A,{className:"h-3 w-3"})})]},t))})})]})};function I(){var e,t,a,u;let{user:h}=(0,n.A)(),{orders:p}=(0,l.h)(),[k,I]=(0,s.useState)(null),[z,T]=(0,s.useState)(null),{formatPrice:V}=(0,w.H)(),{t:_}=(0,O.B)(),{toast:H}=(0,C.dj)(),P=(0,s.useMemo)(()=>h?p.filter(e=>e.customer.id===h.id):[],[p,h]),L=k?k.items.reduce((e,t)=>e+t.variant.price*t.quantity,0):0,F=k?(L-(null!=(e=k.discountAmount)?e:0)-(null!=(t=k.valhallaCoinsValue)?t:0))*((null!=(a=k.paymentMethod.taxRate)?a:0)/100):0,B=e=>{navigator.clipboard.writeText(e),H({title:"Copied!",description:"The information has been copied to your clipboard."})};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold",children:_("dashboardOrders.title")}),(0,r.jsx)("p",{className:"text-muted-foreground",children:_("dashboardOrders.subtitle")})]}),(0,r.jsx)(g.lG,{open:!!z,onOpenChange:e=>!e&&T(null),children:(0,r.jsxs)(g.Cf,{children:[(0,r.jsxs)(g.c7,{children:[(0,r.jsx)(g.L3,{children:"Delivered Information"}),(0,r.jsxs)(g.rr,{children:["Your delivery information for order ",null==z?void 0:z.id]})]}),(0,r.jsx)(A.F,{className:"max-h-[60vh]",children:(0,r.jsx)("div",{className:"space-y-4 pr-6 py-4",children:null==z?void 0:z.items.map(e=>{var t;let a=null==(t=z.deliveredItems)?void 0:t[e.id];return a&&0!==a.length?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("p",{className:"font-semibold",children:[e.name," ",(0,r.jsxs)("span",{className:"text-muted-foreground",children:["(",e.variant.name,")"]})]}),(0,r.jsx)("div",{className:"space-y-1",children:a.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between bg-secondary p-2 rounded-md",children:[(0,r.jsx)("code",{className:"text-sm font-mono whitespace-pre-wrap",children:e}),(0,r.jsx)(i.$,{size:"icon",variant:"ghost",className:"h-7 w-7 shrink-0",onClick:()=>B(e),children:(0,r.jsx)(f.A,{className:"h-4 w-4"})})]},t))})]},e.id):null})})}),(0,r.jsx)(g.Es,{children:(0,r.jsx)(g.HM,{asChild:!0,children:(0,r.jsx)(i.$,{type:"button",variant:"secondary",children:"Close"})})})]})}),(0,r.jsx)(g.lG,{open:!!k,onOpenChange:e=>!e&&I(null),children:(0,r.jsxs)(g.Cf,{className:"sm:max-w-2xl",children:[(0,r.jsxs)(g.c7,{children:[(0,r.jsx)(g.L3,{children:_("dashboardOrders.orderDetails")}),(0,r.jsxs)(g.rr,{children:[_("dashboardOrders.id")," ",null==k?void 0:k.id]})]}),k&&(0,r.jsx)(A.F,{className:"max-h-[70vh]",children:(0,r.jsxs)("div",{className:"pr-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:_("dashboardOrders.items")}),(0,r.jsx)("div",{className:"space-y-4",children:k.items.map(e=>(0,r.jsxs)("div",{className:"flex flex-col gap-2 p-2 border rounded-md",children:[(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)(d.default,{src:e.image,alt:e.name,width:48,height:48,className:"rounded-md object-cover"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("p",{className:"font-semibold",children:[e.name," ",(0,r.jsxs)("span",{className:"text-muted-foreground font-normal",children:["(",e.variant.name,")"]})]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e.quantity," x ",V(e.variant.price)]}),(0,r.jsx)(M,{item:e})]}),(0,r.jsx)("p",{className:"font-semibold",children:V(e.quantity*e.variant.price)})]}),(0,r.jsx)(D,{order:k,item:e})]},e.id))})]}),(0,r.jsx)(y.w,{}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:_("dashboardOrders.payment")}),(0,r.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:_("cart.subtotal")}),(0,r.jsx)("span",{children:V(L)})]}),k.discountAmount&&k.discountAmount>0&&(0,r.jsxs)("div",{className:"flex justify-between text-green-600 dark:text-green-400",children:[(0,r.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,r.jsx)(v.A,{className:"h-4 w-4"}),_("checkoutPage.discount")," (",k.appliedCouponCode,")"]}),(0,r.jsxs)("span",{children:["- ",V(k.discountAmount)]})]}),k.valhallaCoinsValue&&k.valhallaCoinsValue>0&&(0,r.jsxs)("div",{className:"flex justify-between text-amber-600 dark:text-amber-400",children:[(0,r.jsxs)("span",{className:"text-muted-foreground flex items-center gap-1",children:[(0,r.jsx)(j.A,{className:"h-4 w-4"}),_("checkoutPage.coinsRedeemed")," (",(0,R.Ir)(k.valhallaCoinsApplied),")"]}),(0,r.jsxs)("span",{children:["- ",V(k.valhallaCoinsValue)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{className:"text-muted-foreground",children:[_("cart.tax")," (",null!=(u=k.paymentMethod.taxRate)?u:0,"%)"]}),(0,r.jsxs)("span",{children:["+ ",V(F)]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:_("dashboardOrders.method")}),(0,r.jsx)("span",{children:k.paymentMethod.name})]}),(0,r.jsxs)("div",{className:"flex justify-between font-bold text-base border-t pt-2 mt-2",children:[(0,r.jsx)("span",{children:_("dashboardOrders.total")}),(0,r.jsx)("span",{children:V(k.total)})]})]}),k.paymentProofImage&&(0,r.jsxs)("div",{className:"mt-4",children:[(0,r.jsx)("h4",{className:"font-semibold mb-2",children:_("dashboardOrders.paymentProof")}),(0,r.jsx)("div",{className:"relative aspect-video w-full border rounded-md",children:(0,r.jsx)(d.default,{src:k.paymentProofImage,alt:"Payment Proof",layout:"fill",className:"object-contain"})})]}),"refunded"===k.status&&k.refundedAt&&(0,r.jsxs)("div",{className:"mt-4 p-3 rounded-md bg-destructive/10 border border-destructive/20 text-sm",children:[(0,r.jsx)("h4",{className:"font-semibold text-destructive mb-2",children:_("dashboardOrders.refundDetails")}),(0,r.jsxs)("div",{className:"space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-muted-foreground",children:_("dashboardOrders.refundedOn")}),(0,r.jsx)("span",{children:(0,N.GP)(new Date(k.refundedAt),"PPp")})]}),k.refundReason&&(0,r.jsxs)("div",{className:"flex justify-between items-start text-left",children:[(0,r.jsx)("span",{className:"text-muted-foreground shrink-0",children:_("dashboardOrders.reason")}),(0,r.jsx)("p",{className:"text-right ml-4",children:k.refundReason})]})]})]})]})]})}),(0,r.jsx)(g.Es,{className:"sm:justify-end items-center",children:(0,r.jsx)(g.HM,{asChild:!0,children:(0,r.jsx)(i.$,{type:"button",variant:"secondary",children:_("dashboardOrders.close")})})})]})}),(0,r.jsxs)(o.Zp,{children:[(0,r.jsxs)(o.aR,{children:[(0,r.jsx)(o.ZB,{children:_("dashboardOrders.orderHistory")}),(0,r.jsx)(o.BT,{children:_("dashboardOrders.orderHistoryDesc")})]}),(0,r.jsx)(o.Wu,{className:"p-2 md:p-6 md:pt-0",children:(0,r.jsxs)(c.XI,{children:[(0,r.jsx)(c.A0,{children:(0,r.jsxs)(c.Hj,{children:[(0,r.jsx)(c.nd,{children:_("dashboardOrders.orderId")}),(0,r.jsx)(c.nd,{children:_("dashboardOrders.date")}),(0,r.jsx)(c.nd,{children:_("dashboardOrders.total")}),(0,r.jsx)(c.nd,{children:_("dashboardOrders.status")}),(0,r.jsx)(c.nd,{className:"text-right",children:_("dashboardOrders.actions")})]})}),(0,r.jsx)(c.BF,{children:P.length>0?P.map(e=>{let t=S[e.status],a="completed"===e.status&&e.deliveredItems&&Object.keys(e.deliveredItems).length>0;return(0,r.jsxs)(c.Hj,{children:[(0,r.jsx)(c.nA,{className:"font-mono text-xs",children:e.id}),(0,r.jsx)(c.nA,{children:(0,N.GP)(new Date(e.createdAt),"P")}),(0,r.jsx)(c.nA,{className:"font-semibold",children:V(e.total)}),(0,r.jsx)(c.nA,{children:(0,r.jsxs)(m.E,{variant:t.variant,className:"gap-1",children:[(0,r.jsx)(t.icon,{className:"h-3 w-3"}),t.label]})}),(0,r.jsxs)(c.nA,{className:"text-right space-x-2",children:[a&&(0,r.jsxs)(i.$,{variant:"outline",size:"sm",onClick:()=>T(e),children:[(0,r.jsx)(x.A,{className:"mr-2 h-4 w-4"})," Delivery"]}),(0,r.jsxs)(i.$,{variant:"ghost",size:"sm",onClick:()=>I(e),children:[(0,r.jsx)(b.A,{className:"mr-2 h-4 w-4"})," ",_("dashboardOrders.view")]})]})]},e.id)}):(0,r.jsx)(c.Hj,{children:(0,r.jsx)(c.nA,{colSpan:5,className:"text-center h-24",children:_("dashboardOrders.noOrders")})})})]})})]})]})}},24371:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},26126:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var r=a(95155);a(12115);var s=a(74466),d=a(59434);let l=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function n(e){let{className:t,variant:a,...s}=e;return(0,r.jsx)("div",{className:(0,d.cn)(l({variant:a}),t),...s})}},30285:(e,t,a)=>{"use strict";a.d(t,{$:()=>o,r:()=>i});var r=a(95155),s=a(12115),d=a(66634),l=a(74466),n=a(59434);let i=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 ease-in-out hover:-translate-y-0.5 active:translate-y-0 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=s.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:o=!1,...c}=e,m=o?d.DX:"button";return(0,r.jsx)(m,{className:(0,n.cn)(i({variant:s,size:l,className:a})),ref:t,...c})});o.displayName="Button"},37830:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("TicketPercent",[["path",{d:"M2 9a3 3 0 1 1 0 6v2a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-2a3 3 0 1 1 0-6V7a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"1l48ns"}],["path",{d:"M9 9h.01",key:"1q5me6"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"M15 15h.01",key:"lqbp3k"}]])},38988:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]])},54165:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>h,Es:()=>x,HM:()=>m,L3:()=>f,c7:()=>p,lG:()=>i,rr:()=>v,zM:()=>o});var r=a(95155),s=a(12115),d=a(45821),l=a(25318),n=a(59434);let i=d.bL,o=d.l9,c=d.ZL,m=d.bm,u=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.hJ,{ref:t,className:(0,n.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...s})});u.displayName=d.hJ.displayName;let h=s.forwardRef((e,t)=>{let{className:a,children:s,...i}=e;return(0,r.jsxs)(c,{children:[(0,r.jsx)(u,{}),(0,r.jsxs)(d.UC,{ref:t,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...i,children:[s,(0,r.jsxs)(d.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,r.jsx)(l.A,{className:"h-4 w-4"}),(0,r.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=d.UC.displayName;let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};p.displayName="DialogHeader";let x=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};x.displayName="DialogFooter";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.hE,{ref:t,className:(0,n.cn)("text-lg font-semibold leading-none tracking-tight",a),...s})});f.displayName=d.hE.displayName;let v=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(d.VY,{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...s})});v.displayName=d.VY.displayName},58111:(e,t,a)=>{"use strict";a.d(t,{h:()=>c});var r=a(88693),s=a(46786),d=a(19600),l=a(84526),n=a(22100),i=a(2480),o=a(50057);let c=(0,r.vt)((0,s.Zr)((e,t)=>({orders:[],addOrder:t=>{let a={...t,createdAt:new Date().toISOString(),reviewPrompted:!1};a.customer.id&&a.valhallaCoinsApplied&&a.valhallaCoinsApplied>0&&n.A.getState().updateValhallaCoins(a.customer.id,-a.valhallaCoinsApplied),e(e=>({orders:[a,...e.orders]}))},updateOrderStatus:(t,a,r,s)=>{e(e=>{let c=e.orders.findIndex(e=>e.id===t);if(-1===c)return e;let m=[...e.orders],u={...m[c]},h=u.status;if(h===a)return e;if("refunded"===a&&"refunded"!==h){if("store_wallet"===u.paymentMethod.id&&n.A.getState().updateWalletBalance(u.customer.id,u.total),u.valhallaCoinsApplied&&u.valhallaCoinsApplied>0&&n.A.getState().updateValhallaCoins(u.customer.id,u.valhallaCoinsApplied),"completed"===h){var p,x;let{findUserById:e}=o.C.getState(),t=e(u.customer.id),a=!!((null==t?void 0:t.premium)&&"active"===t.premium.status&&new Date(t.premium.expiresAt)>new Date),r=u.total+(null!=(p=u.discountAmount)?p:0)-(null!=(x=u.valhallaCoinsValue)?x:0);n.A.getState().updateTotalSpent(u.customer.id,-(r*(a?1.5:1)));let s=Math.floor(r*i.USD_TO_VALHALLA_COIN_RATE);n.A.getState().updateValhallaCoins(u.customer.id,-s)}u.refundReason=r,u.refundedAt=new Date().toISOString()}if("completed"===a&&"completed"!==h){let{updateTotalSpent:e,updateValhallaCoins:t}=n.A.getState(),{findUserById:a,subscribeToPremium:r}=o.C.getState(),c=u.items.find(e=>"premium-membership-product"===e.productId);c&&r(u.customer.id,c.quantity);let m=a(u.customer.id),h=!!((null==m?void 0:m.premium)&&"active"===m.premium.status&&new Date(m.premium.expiresAt)>new Date),p=u.total-(u.valhallaCoinsValue||0);if(p>0){e(u.customer.id,p*(h?1.5:1));let a=Math.floor(p*i.USD_TO_VALHALLA_COIN_RATE);a>0&&t(u.customer.id,a)}let{deliverStockForOrder:x}=d.C.getState(),{categories:f}=l.C.getState(),v=new Map(f.map(e=>[e.name,e])),j={...s||{}};for(let e of u.items){let t=v.get(e.category);if((null==t?void 0:t.deliveryMethod)==="instant"){let t=x(e.productId,e.quantity);t.length>0&&(j[e.id]=t)}}u.deliveredItems=j}return u.status=a,m[c]=u,{orders:m}})},markOrderAsReviewPrompted:t=>{let a=new Set(t);e(e=>({orders:e.orders.map(e=>a.has(e.id)?{...e,reviewPrompted:!0}:e)}))},updateDeliveredItems:(t,a)=>{e(e=>({orders:e.orders.map(e=>e.id===t?{...e,deliveredItems:a}:e)}))}}),{name:"topup-hub-orders"}))},66424:(e,t,a)=>{"use strict";a.d(t,{F:()=>n});var r=a(95155),s=a(12115),d=a(47655),l=a(59434);let n=s.forwardRef((e,t)=>{let{className:a,children:s,viewportRef:n,...o}=e;return(0,r.jsxs)(d.bL,{ref:t,className:(0,l.cn)("relative overflow-hidden",a),...o,children:[(0,r.jsx)(d.LM,{ref:n,className:"h-full w-full rounded-[inherit]",children:s}),(0,r.jsx)(i,{}),(0,r.jsx)(d.OK,{})]})});n.displayName=d.bL.displayName;let i=s.forwardRef((e,t)=>{let{className:a,orientation:s="vertical",...n}=e;return(0,r.jsx)(d.VM,{ref:t,orientation:s,className:(0,l.cn)("flex touch-none select-none transition-colors","vertical"===s&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===s&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...n,children:(0,r.jsx)(d.lr,{className:"relative flex-1 rounded-full bg-border"})})});i.displayName=d.VM.displayName},66695:(e,t,a)=>{"use strict";a.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>i,Zp:()=>l,aR:()=>n,wL:()=>m});var r=a(95155),s=a(12115),d=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...s})});l.displayName="Card";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...s})});n.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("text-2xl font-semibold leading-none tracking-tight",a),...s})});i.displayName="CardTitle";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("text-sm text-muted-foreground",a),...s})});o.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,d.cn)("flex items-center p-6 pt-0",a),...s})});m.displayName="CardFooter"},67554:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},84526:(e,t,a)=>{"use strict";a.d(t,{C:()=>l});var r=a(88693),s=a(46786),d=a(93473);let l=(0,r.vt)((0,s.Zr)(e=>({categories:d.LZ,addCategory:t=>{let a={id:"cat_".concat(Date.now()),...t};e(e=>({categories:[...e.categories,a]}))},updateCategory:t=>{e(e=>({categories:e.categories.map(e=>e.id===t.id?t:e)}))},deleteCategory:t=>{e(e=>({categories:e.categories.filter(e=>e.id!==t)}))}}),{name:"topup-hub-categories"}))},85127:(e,t,a)=>{"use strict";a.d(t,{A0:()=>n,BF:()=>i,Hj:()=>o,XI:()=>l,nA:()=>m,nd:()=>c});var r=a(95155),s=a(12115),d=a(59434);let l=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:t,className:(0,d.cn)("w-full caption-bottom text-sm",a),...s})})});l.displayName="Table";let n=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("thead",{ref:t,className:(0,d.cn)("[&_tr]:border-b",a),...s})});n.displayName="TableHeader";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tbody",{ref:t,className:(0,d.cn)("[&_tr:last-child]:border-0",a),...s})});i.displayName="TableBody",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tfoot",{ref:t,className:(0,d.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})}).displayName="TableFooter";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("tr",{ref:t,className:(0,d.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})});o.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("th",{ref:t,className:(0,d.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})});c.displayName="TableHead";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("td",{ref:t,className:(0,d.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})});m.displayName="TableCell",s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("caption",{ref:t,className:(0,d.cn)("mt-4 text-sm text-muted-foreground",a),...s})}).displayName="TableCaption"},87489:(e,t,a)=>{"use strict";a.d(t,{b:()=>o});var r=a(12115),s=a(63540),d=a(95155),l="horizontal",n=["horizontal","vertical"],i=r.forwardRef((e,t)=>{var a;let{decorative:r,orientation:i=l,...o}=e,c=(a=i,n.includes(a))?i:l;return(0,d.jsx)(s.sG.div,{"data-orientation":c,...r?{role:"none"}:{"aria-orientation":"vertical"===c?c:void 0,role:"separator"},...o,ref:t})});i.displayName="Separator";var o=i},89367:(e,t,a)=>{"use strict";function r(e,[t,a]){return Math.min(a,Math.max(t,e))}a.d(t,{q:()=>r})},93576:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});let r=(0,a(40157).A)("KeyRound",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]])},94315:(e,t,a)=>{"use strict";a.d(t,{jH:()=>d});var r=a(12115);a(95155);var s=r.createContext(void 0);function d(e){let t=r.useContext(s);return e||t||"ltr"}}},e=>{var t=t=>e(e.s=t);e.O(0,[8918,5856,8722,6766,7148,106,3013,6967,4706,8441,1684,7358],()=>t(22656)),_N_E=e.O()}]);