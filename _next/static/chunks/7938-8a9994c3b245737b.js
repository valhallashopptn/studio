"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7938],{9381:(e,t,a)=>{a.d(t,{H:()=>o,p:()=>d});var r=a(88693),l=a(46786);let d={USD:1,TND:3.1},o=(0,r.vt)((0,l.Zr)((e,t)=>({currency:"USD",setCurrency:t=>e({currency:t}),formatPrice:e=>{let{currency:a}=t(),r=e*d[a];return"TND"===a?"".concat(r.toFixed(2)," TND"):"$".concat(r.toFixed(2))}}),{name:"topup-hub-currency",partialize:e=>({currency:e.currency})}))},19600:(e,t,a)=>{a.d(t,{C:()=>o});var r=a(88693),l=a(46786),d=a(93473);let o=(0,r.vt)((0,l.Zr)((e,t)=>({stock:d.nB,addStockItems:(t,a)=>e(e=>{let r=a.filter(e=>""!==e.trim()).map(e=>({id:"stk_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,5)),productId:t,data:e.trim(),isUsed:!1,addedAt:new Date().toISOString()}));return{stock:[...e.stock,...r]}}),deleteStockItem:t=>{e(e=>({stock:e.stock.filter(e=>e.id!==t)}))},getStockForProduct:e=>t().stock.filter(t=>t.productId===e),getAvailableStockCount:e=>t().stock.filter(t=>t.productId===e&&!t.isUsed).length,deliverStockForOrder:(a,r)=>{let l=t().stock.filter(e=>e.productId===a&&!e.isUsed);if(l.length<r){console.warn("Not enough stock for product ".concat(a,". Required: ").concat(r,", Available: ").concat(l.length));let t=l.map(e=>e.data),d=new Set(l.map(e=>e.id));return e(e=>({stock:e.stock.map(e=>d.has(e.id)?{...e,isUsed:!0,usedAt:new Date().toISOString()}:e)})),t}let d=l.slice(0,r),o=d.map(e=>e.data),s=new Set(d.map(e=>e.id));return e(e=>({stock:e.stock.map(e=>s.has(e.id)?{...e,isUsed:!0,usedAt:new Date().toISOString()}:e)})),o}}),{name:"topup-hub-stock"}))},22346:(e,t,a)=>{a.d(t,{w:()=>s});var r=a(95155),l=a(12115),d=a(87489),o=a(59434);let s=l.forwardRef((e,t)=>{let{className:a,orientation:l="horizontal",decorative:s=!0,...i}=e;return(0,r.jsx)(d.b,{ref:t,decorative:s,orientation:l,className:(0,o.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...i})});s.displayName=d.b.displayName},58111:(e,t,a)=>{a.d(t,{h:()=>c});var r=a(88693),l=a(46786),d=a(19600),o=a(84526),s=a(22100),i=a(2480),n=a(50057);let c=(0,r.vt)((0,l.Zr)((e,t)=>({orders:[],addOrder:t=>{let a={...t,createdAt:new Date().toISOString(),reviewPrompted:!1};a.customer.id&&a.valhallaCoinsApplied&&a.valhallaCoinsApplied>0&&s.A.getState().updateValhallaCoins(a.customer.id,-a.valhallaCoinsApplied),e(e=>({orders:[a,...e.orders]}))},updateOrderStatus:(t,a,r,l)=>{e(e=>{let c=e.orders.findIndex(e=>e.id===t);if(-1===c)return e;let u=[...e.orders],m={...u[c]},p=m.status;if(p===a)return e;if("refunded"===a&&"refunded"!==p){if("store_wallet"===m.paymentMethod.id&&s.A.getState().updateWalletBalance(m.customer.id,m.total),m.valhallaCoinsApplied&&m.valhallaCoinsApplied>0&&s.A.getState().updateValhallaCoins(m.customer.id,m.valhallaCoinsApplied),"completed"===p){var f,g;let{findUserById:e}=n.C.getState(),t=e(m.customer.id),a=!!((null==t?void 0:t.premium)&&"active"===t.premium.status&&new Date(t.premium.expiresAt)>new Date),r=m.total+(null!=(f=m.discountAmount)?f:0)-(null!=(g=m.valhallaCoinsValue)?g:0);s.A.getState().updateTotalSpent(m.customer.id,-(r*(a?1.5:1)));let l=Math.floor(r*i.USD_TO_VALHALLA_COIN_RATE);s.A.getState().updateValhallaCoins(m.customer.id,-l)}m.refundReason=r,m.refundedAt=new Date().toISOString()}if("completed"===a&&"completed"!==p){let{updateTotalSpent:e,updateValhallaCoins:t}=s.A.getState(),{findUserById:a,subscribeToPremium:r}=n.C.getState(),c=m.items.find(e=>"premium-membership-product"===e.productId);c&&r(m.customer.id,c.quantity);let u=a(m.customer.id),p=!!((null==u?void 0:u.premium)&&"active"===u.premium.status&&new Date(u.premium.expiresAt)>new Date),f=m.total-(m.valhallaCoinsValue||0);if(f>0){e(m.customer.id,f*(p?1.5:1));let a=Math.floor(f*i.USD_TO_VALHALLA_COIN_RATE);a>0&&t(m.customer.id,a)}let{deliverStockForOrder:g}=d.C.getState(),{categories:h}=o.C.getState(),x=new Map(h.map(e=>[e.name,e])),v={...l||{}};for(let e of m.items){let t=x.get(e.category);if((null==t?void 0:t.deliveryMethod)==="instant"){let t=g(e.productId,e.quantity);t.length>0&&(v[e.id]=t)}}m.deliveredItems=v}return m.status=a,u[c]=m,{orders:u}})},markOrderAsReviewPrompted:t=>{let a=new Set(t);e(e=>({orders:e.orders.map(e=>a.has(e.id)?{...e,reviewPrompted:!0}:e)}))},updateDeliveredItems:(t,a)=>{e(e=>({orders:e.orders.map(e=>e.id===t?{...e,deliveredItems:a}:e)}))}}),{name:"topup-hub-orders"}))},66424:(e,t,a)=>{a.d(t,{F:()=>s});var r=a(95155),l=a(12115),d=a(47655),o=a(59434);let s=l.forwardRef((e,t)=>{let{className:a,children:l,viewportRef:s,...n}=e;return(0,r.jsxs)(d.bL,{ref:t,className:(0,o.cn)("relative overflow-hidden",a),...n,children:[(0,r.jsx)(d.LM,{ref:s,className:"h-full w-full rounded-[inherit]",children:l}),(0,r.jsx)(i,{}),(0,r.jsx)(d.OK,{})]})});s.displayName=d.bL.displayName;let i=l.forwardRef((e,t)=>{let{className:a,orientation:l="vertical",...s}=e;return(0,r.jsx)(d.VM,{ref:t,orientation:l,className:(0,o.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...s,children:(0,r.jsx)(d.lr,{className:"relative flex-1 rounded-full bg-border"})})});i.displayName=d.VM.displayName},84526:(e,t,a)=>{a.d(t,{C:()=>o});var r=a(88693),l=a(46786),d=a(93473);let o=(0,r.vt)((0,l.Zr)(e=>({categories:d.LZ,addCategory:t=>{let a={id:"cat_".concat(Date.now()),...t};e(e=>({categories:[...e.categories,a]}))},updateCategory:t=>{e(e=>({categories:e.categories.map(e=>e.id===t.id?t:e)}))},deleteCategory:t=>{e(e=>({categories:e.categories.filter(e=>e.id!==t)}))}}),{name:"topup-hub-categories"}))},88539:(e,t,a)=>{a.d(t,{T:()=>o});var r=a(95155),l=a(12115),d=a(59434);let o=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)("textarea",{className:(0,d.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});o.displayName="Textarea"},90010:(e,t,a)=>{a.d(t,{$v:()=>g,EO:()=>u,Lt:()=>i,Rx:()=>h,Zr:()=>x,ck:()=>p,r7:()=>f,wd:()=>m});var r=a(95155),l=a(12115),d=a(62278),o=a(59434),s=a(30285);let i=d.bL;d.l9;let n=d.ZL,c=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(d.hJ,{className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});c.displayName=d.hJ.displayName;let u=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsxs)(n,{children:[(0,r.jsx)(c,{}),(0,r.jsx)(d.UC,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...l})]})});u.displayName=d.UC.displayName;let m=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};m.displayName="AlertDialogHeader";let p=e=>{let{className:t,...a}=e;return(0,r.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};p.displayName="AlertDialogFooter";let f=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(d.hE,{ref:t,className:(0,o.cn)("text-lg font-semibold",a),...l})});f.displayName=d.hE.displayName;let g=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(d.VY,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",a),...l})});g.displayName=d.VY.displayName;let h=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(d.rc,{ref:t,className:(0,o.cn)((0,s.r)(),a),...l})});h.displayName=d.rc.displayName;let x=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,r.jsx)(d.ZD,{ref:t,className:(0,o.cn)((0,s.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...l})});x.displayName=d.ZD.displayName}}]);